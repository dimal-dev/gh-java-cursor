<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{landing/layout/main}">
<head>
    <title th:text="${metaTitle}">Help Me Find a Therapist - GoodHelp</title>
    <link rel="stylesheet" th:href="@{/css/landing/main.css}">
    <style>
        .gh-request-therapist {
            padding: 60px 0;
        }
        .gh-request-therapist__h1 {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 40px;
            text-align: center;
        }
        .gh-request-therapist-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .gh-request-therapist__form {
            background: #fff;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .gh-request-therapist__section {
            margin-bottom: 30px;
        }
        .gh-request-therapist__section-header {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 12px;
        }
        .gh-request-therapist__section-sub-header {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }
        .gh-input {
            margin-bottom: 20px;
        }
        .gh-input-text {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
        }
        .gh-input-text:focus {
            outline: none;
            border-color: #D5D55E;
        }
        .gh-error {
            color: #ef4444;
            font-size: 14px;
            margin-top: 4px;
        }
        .gh-switch-new {
            display: inline-block;
            margin-right: 15px;
            margin-bottom: 10px;
        }
        .gh-switch-new__input {
            display: none;
        }
        .gh-switch-new__label {
            display: inline-block;
            padding: 10px 20px;
            border: 2px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .gh-switch-new__input:checked + .gh-switch-new__label {
            background: #D5D55E;
            border-color: #D5D55E;
            color: #202020;
        }
        .topics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        .gh-button {
            background: #EF9665;
            color: white;
            padding: 14px 32px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }
        .gh-button:hover {
            background: #e08550;
        }
        textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
        }
    </style>
</head>
<body>
<main layout:fragment="content">
    <div class="gh-request-therapist gh-main-block">
        <h1 class="gh-request-therapist__h1" th:text="#{landing.request.title}">
            Help Me Find a Therapist
        </h1>

        <div class="gh-request-therapist-container">
            <form class="gh-request-therapist__form"
                  th:action="@{/request-therapist}" 
                  th:object="${form}" 
                  method="post">
                
                <!-- Name -->
                <div class="gh-request-therapist__section">
                    <div class="gh-request-therapist__section-header" th:text="#{landing.request.name}">
                        Your Name
                    </div>
                    <div class="gh-input">
                        <input type="text" 
                               th:field="*{name}" 
                               class="gh-input-text"
                               th:placeholder="#{landing.request.name}">
                        <span th:if="${#fields.hasErrors('name')}" 
                              th:errors="*{name}" 
                              class="gh-error"></span>
                    </div>
                </div>

                <!-- Sex Preference (only if no specific therapist) -->
                <div class="gh-request-therapist__section" th:if="${therapistId == null}">
                    <div class="gh-request-therapist__section-header" th:text="#{landing.request.sex_preference}">
                        Which therapist gender do you prefer?
                    </div>
                    <div class="gh-request-therapist__section-content">
                        <div class="gh-switch-new">
                            <input type="radio" 
                                   th:field="*{sex}" 
                                   value="both" 
                                   id="sex_both">
                            <label for="sex_both" class="gh-switch-new__label" th:text="#{landing.request.sex_both}">
                                Doesn't matter
                            </label>
                        </div>
                        <div class="gh-switch-new">
                            <input type="radio" 
                                   th:field="*{sex}" 
                                   value="female" 
                                   id="sex_female">
                            <label for="sex_female" class="gh-switch-new__label" th:text="#{landing.request.sex_female}">
                                Female
                            </label>
                        </div>
                        <div class="gh-switch-new">
                            <input type="radio" 
                                   th:field="*{sex}" 
                                   value="male" 
                                   id="sex_male">
                            <label for="sex_male" class="gh-switch-new__label" th:text="#{landing.request.sex_male}">
                                Male
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Topics -->
                <div class="gh-request-therapist__section">
                    <div class="gh-request-therapist__section-header" th:text="#{landing.request.topics}">
                        What would you like to work on?
                    </div>
                    <div th:each="group : ${topicsGrouped}" class="gh-request-therapist__section-content">
                        <div class="gh-request-therapist__section-sub-header" th:text="${group.key}">
                            Category
                        </div>
                        <div class="topics-grid">
                            <div class="gh-switch-new" th:each="topic : ${group.value}">
                                <input type="checkbox" 
                                       th:field="*{topics}" 
                                       th:value="${topic}" 
                                       th:id="${'topic-' + topic}">
                                <label th:for="${'topic-' + topic}" 
                                       class="gh-switch-new__label" 
                                       th:text="${topic}">
                                    Topic
                                </label>
                            </div>
                        </div>
                    </div>
                    <span th:if="${#fields.hasErrors('topics')}" 
                          th:errors="*{topics}" 
                          class="gh-error"></span>
                </div>

                <!-- LGBTQ Preference (only if no specific therapist) -->
                <div class="gh-request-therapist__section" th:if="${therapistId == null}">
                    <div class="gh-request-therapist__section-header" th:text="#{landing.request.lgbtq}">
                        Is LGBTQ+ experience important?
                    </div>
                    <div class="gh-request-therapist__section-content">
                        <div class="gh-switch-new">
                            <input type="radio" 
                                   th:field="*{lgbtq}" 
                                   value="1" 
                                   id="lgbtq_yes">
                            <label for="lgbtq_yes" class="gh-switch-new__label" th:text="#{Yes}">
                                Yes
                            </label>
                        </div>
                        <div class="gh-switch-new">
                            <input type="radio" 
                                   th:field="*{lgbtq}" 
                                   value="0" 
                                   id="lgbtq_no" 
                                   checked>
                            <label for="lgbtq_no" class="gh-switch-new__label" th:text="#{No}">
                                No
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Email -->
                <div class="gh-request-therapist__section">
                    <div class="gh-request-therapist__section-header" th:text="#{landing.request.email}">
                        Email
                    </div>
                    <div class="gh-input">
                        <input type="email" 
                               th:field="*{email}" 
                               class="gh-input-text"
                               th:placeholder="#{landing.request.email}">
                        <span th:if="${#fields.hasErrors('email')}" 
                              th:errors="*{email}" 
                              class="gh-error"></span>
                    </div>
                </div>

                <!-- Phone -->
                <div class="gh-request-therapist__section">
                    <div class="gh-request-therapist__section-header" th:text="#{landing.request.phone}">
                        Phone (optional)
                    </div>
                    <div class="gh-input">
                        <input type="tel" 
                               th:field="*{phone}" 
                               class="gh-input-text"
                               th:placeholder="#{landing.request.phone}">
                    </div>
                </div>

                <!-- Channel -->
                <div class="gh-request-therapist__section">
                    <div class="gh-request-therapist__section-header" th:text="#{landing.request.channel}">
                        How should we reach you?
                    </div>
                    <div class="gh-request-therapist__section-content">
                        <div class="gh-switch-new">
                            <input type="radio" 
                                   th:field="*{channel}" 
                                   value="telegram" 
                                   id="channel_telegram">
                            <label for="channel_telegram" class="gh-switch-new__label">
                                Telegram
                            </label>
                        </div>
                        <div class="gh-switch-new">
                            <input type="radio" 
                                   th:field="*{channel}" 
                                   value="viber" 
                                   id="channel_viber">
                            <label for="channel_viber" class="gh-switch-new__label">
                                Viber
                            </label>
                        </div>
                        <div class="gh-switch-new">
                            <input type="radio" 
                                   th:field="*{channel}" 
                                   value="whatsapp" 
                                   id="channel_whatsapp">
                            <label for="channel_whatsapp" class="gh-switch-new__label">
                                WhatsApp
                            </label>
                        </div>
                    </div>
                    <span th:if="${#fields.hasErrors('channel')}" 
                          th:errors="*{channel}" 
                          class="gh-error"></span>
                </div>

                <!-- Consultation Type -->
                <div class="gh-request-therapist__section">
                    <div class="gh-request-therapist__section-header" th:text="#{landing.request.consultation_type}">
                        This consultation is for
                    </div>
                    <div class="gh-request-therapist__section-content">
                        <div class="gh-switch-new">
                            <input type="radio" 
                                   th:field="*{type}" 
                                   value="individual" 
                                   id="type_individual">
                            <label for="type_individual" class="gh-switch-new__label" th:text="#{landing.request.type_individual}">
                                For myself
                            </label>
                        </div>
                        <div class="gh-switch-new">
                            <input type="radio" 
                                   th:field="*{type}" 
                                   value="couple" 
                                   id="type_couple">
                            <label for="type_couple" class="gh-switch-new__label" th:text="#{landing.request.type_couple}">
                                For couple
                            </label>
                        </div>
                        <div class="gh-switch-new">
                            <input type="radio" 
                                   th:field="*{type}" 
                                   value="teenager" 
                                   id="type_teenager">
                            <label for="type_teenager" class="gh-switch-new__label" th:text="#{landing.request.type_teenager}">
                                For teenager
                            </label>
                        </div>
                    </div>
                    <span th:if="${#fields.hasErrors('type')}" 
                          th:errors="*{type}" 
                          class="gh-error"></span>
                </div>

                <!-- Price -->
                <div class="gh-request-therapist__section">
                    <div class="gh-request-therapist__section-header" th:text="#{landing.request.price}">
                        Select price
                    </div>
                    <div class="gh-input">
                        <input type="text" 
                               th:field="*{price}" 
                               class="gh-input-text"
                               th:placeholder="#{landing.request.price}">
                        <span th:if="${#fields.hasErrors('price')}" 
                              th:errors="*{price}" 
                              class="gh-error"></span>
                    </div>
                </div>

                <!-- Promocode -->
                <div class="gh-request-therapist__section">
                    <div class="gh-request-therapist__section-header" th:text="#{landing.request.promocode}">
                        Promocode (optional)
                    </div>
                    <div class="gh-input">
                        <input type="text" 
                               th:field="*{promocode}" 
                               class="gh-input-text"
                               th:placeholder="#{landing.request.promocode}">
                    </div>
                </div>

                <!-- Message -->
                <div class="gh-request-therapist__section">
                    <div class="gh-request-therapist__section-header" th:text="#{landing.request.message}">
                        Tell us more (optional)
                    </div>
                    <div class="gh-input">
                        <textarea th:field="*{message}" 
                                  rows="4"
                                  th:placeholder="#{landing.request.message}"></textarea>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="gh-request-therapist__section">
                    <button type="submit" class="gh-button" th:text="#{landing.request.submit}">
                        Send Request
                    </button>
                </div>
            </form>
        </div>
    </div>
</main>
</body>
</html>

