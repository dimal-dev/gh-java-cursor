{% extends '@landing/layout/main.html.twig' %}

{% block page_title %}
    {{ 'landing.psiholog_list.title'|trans }} GoodHelp
{% endblock %}

{% block content %}
    <section class="gh-psiholog-list">
        <div class="gh-psiholog-list__soft-light-container">
            <div class="gh-psiholog-list__soft-light"></div>
        </div>
        <div class="gh-container">
            <h1 class="gh-psiholog-list__h1">
                {{ 'our_specialists'|trans }}
            </h1>
            <div class="gh-psiholog-list__list">
                {% for index, psiholog in psihologList %}
{#                    {% if index == 2 %}#}
{#                        <div class="gh-psiholog-list__item gh-psiholog-list__item--help">#}
{#                            <div class="gh-psiholog-list__item-help-back">#}
{#                                <svg width="370" height="663" viewBox="0 0 370 663" fill="none" xmlns="http://www.w3.org/2000/svg">#}
{#                                    <rect x="-30.3496" width="431.125" height="663" fill="#F4F8EB"/>#}
{#                                    <g filter="url(#filter0_d_23_3339)">#}
{#                                        <circle cx="185.213" cy="341.404" r="301.787" transform="rotate(90 185.213 341.404)" fill="#F4F8EB"/>#}
{#                                    </g>#}
{#                                    <g filter="url(#filter1_d_23_3339)">#}
{#                                        <ellipse cx="185.211" cy="341.404" rx="235.371" ry="235.371" transform="rotate(90 185.211 341.404)" fill="#F4F8EB"/>#}
{#                                    </g>#}
{#                                    <defs>#}
{#                                        <filter id="filter0_d_23_3339" x="-136.575" y="23.6169" width="643.575" height="643.575" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">#}
{#                                            <feFlood flood-opacity="0" result="BackgroundImageFix"/>#}
{#                                            <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>#}
{#                                            <feOffset dy="4"/>#}
{#                                            <feGaussianBlur stdDeviation="10"/>#}
{#                                            <feComposite in2="hardAlpha" operator="out"/>#}
{#                                            <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0"/>#}
{#                                            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_23_3339"/>#}
{#                                            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_23_3339" result="shape"/>#}
{#                                        </filter>#}
{#                                        <filter id="filter1_d_23_3339" x="-70.1597" y="90.0334" width="510.742" height="510.742" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">#}
{#                                            <feFlood flood-opacity="0" result="BackgroundImageFix"/>#}
{#                                            <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>#}
{#                                            <feOffset dy="4"/>#}
{#                                            <feGaussianBlur stdDeviation="10"/>#}
{#                                            <feComposite in2="hardAlpha" operator="out"/>#}
{#                                            <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0"/>#}
{#                                            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_23_3339"/>#}
{#                                            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_23_3339" result="shape"/>#}
{#                                        </filter>#}
{#                                    </defs>#}
{#                                </svg>#}
{#                            </div>#}
{#                            <div class="gh-psiholog-list__item-help-need">#}
{#                                Потрібна#}
{#                                <span class="gh-text-color-carrot-1">#}
{#                            допомога?#}
{#                        </span>#}
{#                            </div>#}

{#                            <div class="gh-psiholog-list__item-help-description">#}
{#                                Якщо вам потрібна допомога з вибором психолога, натисніть сюди і ми допоможемо підібрати відповідного#}
{#                            </div>#}

{#                            <div>#}
{#                                <button class="gh-button gh-button--white gh-button--small">#}
{#                                    Допоможіть мені#}
{#                                </button>#}
{#                            </div>#}
{#                        </div>#}
{#                    {% endif %}#}
                    {% include '@landing/partials/pages/_psiholog-short-profile.html.twig' with {
                        psiholog : psiholog,
                        viewPsihologBtnClass: 'view-specific-psiholog-btn'
                    } %}
                {% endfor %}
            </div>
        </div>
    </section>

    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('.view-specific-psiholog-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    gtag("event", "view_specific_psiholog_btn_clicked_on_select_psiholog_page", {
                        'event_category': 'Conversions'
                    });
                });
            });

            document.querySelectorAll('.open-live-chat').forEach(element => {
                element.addEventListener('click', (e) => {
                    e.preventDefault();
                    HelpCrunch('openChat');
                });
            });

            const viewItemListData = [];
            {% for index, psiholog in psihologList %}
                viewItemListData.push({
                    "id": "P{{ psiholog.id }}",
                    "name": "{{ psiholog.fullName }}",
                    "list_name": "Выбрать психолога. Все психологи список",
                    "category": "Все психологи",
                    "list_position": {{ index + 1 }},
                    "quantity": 1,
                    "price": {{ psiholog.price }}
                });
            {% endfor %}

            gtag('event', 'view_item_list', {
                "items": viewItemListData
            });
        });
    </script>
{% endblock %}