{% extends '@landing/layout/main.html.twig' %}

{% block page_title %}
    {{ 'landing.psiholog_list.title'|trans }} GoodHelp
{% endblock %}

{% block content %}
    <section class="gh-family-psiholog">
        <div class="gh-family-psiholog__soft-light-container">
            <div class="gh-family-psiholog__soft-light"></div>
        </div>
        <div class="gh-container">
            <h1 class="gh-family-psiholog__h1">
                {{ 'family_psiholog'|trans }}
            </h1>
            <div class="gh-family-psiholog__box">
                <img src="{{ asset('img/pages/family-photo.png', 'landing') }}"
                     class="gh-family-psiholog__box-family-photo">
                <div class="gh-family-psiholog__box-info">
                    <p>
                        {{ 'family_psiholog.phrase_1'|trans }}
                    </p>

                    <h3>
                        {{ 'family_psiholog.misunderstanding_each_other'|trans }}
                    </h3>

                    <p>
                        {{ 'family_psiholog.pharse_2'|trans }}
                    </p>

                    <h3>
                        {{ 'family_psiholog.problems_with_children'|trans }}
                    </h3>

                    <p>
                        {{ 'family_psiholog.pharse_3'|trans }}
                    </p>

                    <h3>
                        {{ 'family_psiholog.alarm_states'|trans }}
                    </h3>

                    <p>
                        {{ 'family_psiholog.pharse_4'|trans }}
                    </p>

                    <p class="gh-family-psiholog__box-frame">
                        {{ 'family_psiholog.pharse_5'|trans }}
                    </p>
                </div>
            </div>
            <h2 class="gh-family-psiholog__h2">
                {{'family_psiholog.our-psychologists'|trans}}
            </h2>
            <div class="gh-psiholog-list__list">
                {% for index, psiholog in psihologList %}

                    {% include '@landing/partials/pages/_psiholog-short-profile.html.twig' with {
                        psiholog : psiholog,
                        viewPsihologBtnClass: 'view-specific-psiholog-btn'
                    } %}
                {% endfor %}
            </div>
        </div>
    </section>

    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('.view-specific-psiholog-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    gtag("event", "view_specific_psiholog_btn_clicked_on_select_psiholog_page", {
                        'event_category': 'Conversions'
                    });
                });
            });

            document.querySelectorAll('.open-live-chat').forEach(element => {
                element.addEventListener('click', (e) => {
                    e.preventDefault();
                    HelpCrunch('openChat');
                });
            });

            const viewItemListData = [];
            {% for index, psiholog in psihologList %}
            viewItemListData.push({
                "id": "P{{ psiholog.id }}",
                "name": "{{ psiholog.fullName }}",
                "list_name": "Выбрать психолога. Все психологи список",
                "category": "Все психологи",
                "list_position": {{ index + 1 }},
                "quantity": 1,
                "price": {{ psiholog.price }}
            });
            {% endfor %}

            gtag('event', 'view_item_list', {
                "items": viewItemListData
            });
        });
    </script>
{% endblock %}